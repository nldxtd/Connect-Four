## 人工智能导论-四子棋实验报告

吴宸昊 2019011338 计96

### 一、实验结果

与五十个AI进行正反手对决

| id         | wina | winb | losea | loseb |
| ---------- | ---- | ---- | ----- | ----- |
| ibStrategy | 30   | 19   | 20    | 31    |

### 二、具体实现

实现过程采用的是由蒙特卡罗方法改进来的信心上限树算法，伪代码如图：

在给出每一步的落子时，首先进行如下判断：

- 是否存在某一步落子使得机器必胜，存在则必走这一步
- 是否存在某一步落子，如果不下在这里对方一定获胜，存在则必走这一步

如果不满足以上条件，则进行蒙特卡洛模拟：以当前节点为根结点建立UCT树，从根结点出发；如果当前节点存在没有扩展过的子节点，则选择该子节点进行模拟落子；如果所有子节点都已经拓展过，则选择最优的子节点继续扩展。

当有节点被选中之后，我们要对该节点进行随机落子，直到得到结果。注意随机落子其实并不随机，他需要考虑如下几点：

- 当机器落子时，若存在机器必胜点则落在机器必胜点。
- 当机器落子时，若不存在机器必胜点且存在玩家必胜点则落在玩家必胜点。
- 当玩家落子时，若存在玩家必胜点则落在玩家必胜点。
- 当机器落子时，若不存在玩家必胜点且存在机器必输点则落在机器必输点。
- 如果以上条件都不满足，即不存在显式必胜/必输点，则对每个可以落子的节点进行加权随机取点，其中权值为可落子节点的四个方向上同样棋权点的数量和。

当随机落点至棋局终结状态时，就需要回溯模拟落子的收益（胜为1，负为-1，平为0）。

在给定的时间范围内重复选点-模拟-回溯三步，最后在根节点的所有节点中选择胜率最高的节点作为最佳落子点。

### 三、注意事项

1. 在对树进行拓展的过程中，如果存在某一节点已经完全拓展，则应该选择该节点的bestChild进一步拓展，而不是直接返回bestChild并对其搜索。
2. 计算子节点权值：最终选择子节点时是以获胜概率进行参考，而选择子节点进行拓展时应该加入子节点访问次数的考虑。

### 四、实验总结

本次大作业完成过程中，学习了蒙特卡洛方法，在实际编程过程中实际运用了信心上限树算法；个人猜测实现中存在bug导致结果胜率只有50%，但是能写出一个正常工作的AI已经足够振奋。

感谢老师与助教的付出。

### 附：信心上限树伪代码

### ![截屏2021-05-02 下午5.55.30](/Users/wuchenhao/Library/Application Support/typora-user-images/截屏2021-05-02 下午5.55.30.png)





